{"version":3,"sources":["webpack:///./src/view/appointmentList/index.vue?0094","webpack:///./node_modules/vant/es/cell/style/index.js","webpack:///./src/view/appointmentList/index.vue","webpack:///./node_modules/vant/es/swipe-cell/SwipeCell.js","webpack:///./node_modules/vant/es/swipe-cell/index.js","webpack:///./src/view/appointmentList/index.vue?7d03"],"names":["_createVNode","_component_banner","_createElementBlock","_Fragment","_renderList","_ctx","item","_createBlock","_component_van_swipe_cell","key","id","_component_van_cell","border","title","date","area","time","label","userName","right-icon","_withCtx","_createElementVNode","class","status","_component_van_button","square","type","text","onClick","bem","create","swipeCellProps","name","disabled","Boolean","leftWidth","rightWidth","beforeClose","Function","stopPropagation","stdin_default","props","emits","emit","slots","opened","lockClick","startOffset","root","leftRef","rightRef","state","offset","dragging","touch","getWidthByRef","ref2","value","width","open","side","position","close","toggle","Math","abs","THRESHOLD","threshold","onTouchStart","event","start","onTouchMove","deltaX","move","isHorizontal","isEdge","onTouchEnd","setTimeout","args","done","getClickHandler","stop","renderSideContent","contentSlot","eventName","_a","wrapperStyle","transform","transitionDuration","default","call","SwipeCell","defineComponent","components","Banner","setup","onMounted","fetchList","areaMap","1","4","5","appointmentList","ref","axios","get","then","res","console","log","data","onCancelAppointment","loading","clear","code","success","__exports__","render"],"mappings":"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","file":"js/chunk-7bc0632b.201edff1.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=3362bd17&lang=less\"","import \"../../style/base.css\";\nimport \"../../badge/index.css\";\nimport \"../../icon/index.css\";\nimport \"../index.css\";\n","<template>\n    <banner />\n    <van-swipe-cell v-for=\"item in appointmentList\" :key=\"item.id\">\n        <van-cell\n            :border=\"false\"\n            :title=\"`${item.date} ${areaMap[item.area]} ${item.time}`\"\n            :label=\"`预约人：${item.userName}`\"\n        >\n            <template #right-icon>\n                <span\n                    :class=\"{\n                        'c-error': item.status == '0',\n                        'c-success': item.status == '1',\n                    }\"\n                >\n                    {{ [\"已过期\", \"未预约\"][item.status * 1] }}\n                </span>\n            </template>\n        </van-cell>\n        <template v-if=\"item.status == '1'\" #right>\n            <van-button\n                class=\"delete-button\"\n                square\n                type=\"danger\"\n                text=\"取消预约\"\n                @click=\"onCancelAppointment(item.id)\"\n            />\n        </template>\n    </van-swipe-cell>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { defineComponent, reactive, ref, toRefs, onMounted } from \"vue\";\nimport { SwipeCell, Cell, Button, Toast } from \"vant\";\nimport Banner from \"../../components/banner.vue\";\n\nexport default defineComponent({\n    components: {\n        [SwipeCell.name]: SwipeCell,\n        [Cell.name]: Cell,\n        [Button.name]: Button,\n        Banner,\n    },\n    setup() {\n        onMounted(() => {\n            fetchList();\n        });\n\n        const areaMap = {\n            1: \"A区\",\n            4: \"C区\",\n            5: \"乒乓球区\",\n        };\n        const appointmentList = ref([]);\n\n        const fetchList = () => {\n            axios\n                .get(\"http://118.25.4.192:7001/getAppointmentList\")\n                .then((res) => {\n                    console.log(res);\n                    appointmentList.value = res.data;\n                });\n        };\n        const onCancelAppointment = (id) => {\n            Toast.loading(\"取消中...\");\n            axios\n                .get(`http://118.25.4.192:7001/cancelAppointment?id=${id}`)\n                .then((res) => {\n                    Toast.clear();\n                    if (res.data.code == 200) {\n                        Toast.success(\"取消成功\");\n                        fetchList();\n                    }\n                });\n        };\n\n        return {\n            areaMap,\n            appointmentList,\n            onCancelAppointment,\n        };\n    },\n});\n</script>\n\n<style lang=\"less\">\n.c-error {\n    color: red;\n}\n.c-success {\n    color: #3eaf7c;\n}\n.delete-button {\n    height: 100%;\n}\n</style>\n","import { createVNode as _createVNode } from \"vue\";\nimport { ref, reactive, computed, defineComponent } from \"vue\";\nimport { clamp, isDef, numericProp, preventDefault, callInterceptor, createNamespace, makeNumericProp } from \"../utils\";\nimport { useRect, useClickAway } from \"@vant/use\";\nimport { useTouch } from \"../composables/use-touch\";\nimport { useExpose } from \"../composables/use-expose\";\nconst [name, bem] = createNamespace(\"swipe-cell\");\nconst swipeCellProps = {\n  name: makeNumericProp(\"\"),\n  disabled: Boolean,\n  leftWidth: numericProp,\n  rightWidth: numericProp,\n  beforeClose: Function,\n  stopPropagation: Boolean\n};\nvar stdin_default = defineComponent({\n  name,\n  props: swipeCellProps,\n  emits: [\"open\", \"close\", \"click\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    let opened;\n    let lockClick;\n    let startOffset;\n    const root = ref();\n    const leftRef = ref();\n    const rightRef = ref();\n    const state = reactive({\n      offset: 0,\n      dragging: false\n    });\n    const touch = useTouch();\n    const getWidthByRef = (ref2) => ref2.value ? useRect(ref2).width : 0;\n    const leftWidth = computed(() => isDef(props.leftWidth) ? +props.leftWidth : getWidthByRef(leftRef));\n    const rightWidth = computed(() => isDef(props.rightWidth) ? +props.rightWidth : getWidthByRef(rightRef));\n    const open = (side) => {\n      state.offset = side === \"left\" ? leftWidth.value : -rightWidth.value;\n      if (!opened) {\n        opened = true;\n        emit(\"open\", {\n          name: props.name,\n          position: side\n        });\n      }\n    };\n    const close = (position) => {\n      state.offset = 0;\n      if (opened) {\n        opened = false;\n        emit(\"close\", {\n          name: props.name,\n          position\n        });\n      }\n    };\n    const toggle = (side) => {\n      const offset = Math.abs(state.offset);\n      const THRESHOLD = 0.15;\n      const threshold = opened ? 1 - THRESHOLD : THRESHOLD;\n      const width = side === \"left\" ? leftWidth.value : rightWidth.value;\n      if (width && offset > width * threshold) {\n        open(side);\n      } else {\n        close(side);\n      }\n    };\n    const onTouchStart = (event) => {\n      if (!props.disabled) {\n        startOffset = state.offset;\n        touch.start(event);\n      }\n    };\n    const onTouchMove = (event) => {\n      if (props.disabled) {\n        return;\n      }\n      const {\n        deltaX\n      } = touch;\n      touch.move(event);\n      if (touch.isHorizontal()) {\n        lockClick = true;\n        state.dragging = true;\n        const isEdge = !opened || deltaX.value * startOffset < 0;\n        if (isEdge) {\n          preventDefault(event, props.stopPropagation);\n        }\n        state.offset = clamp(deltaX.value + startOffset, -rightWidth.value, leftWidth.value);\n      }\n    };\n    const onTouchEnd = () => {\n      if (state.dragging) {\n        state.dragging = false;\n        toggle(state.offset > 0 ? \"left\" : \"right\");\n        setTimeout(() => {\n          lockClick = false;\n        }, 0);\n      }\n    };\n    const onClick = (position = \"outside\") => {\n      emit(\"click\", position);\n      if (opened && !lockClick) {\n        callInterceptor(props.beforeClose, {\n          args: [{\n            name: props.name,\n            position\n          }],\n          done: () => close(position)\n        });\n      }\n    };\n    const getClickHandler = (position, stop) => (event) => {\n      if (stop) {\n        event.stopPropagation();\n      }\n      onClick(position);\n    };\n    const renderSideContent = (side, ref2) => {\n      const contentSlot = slots[side];\n      if (contentSlot) {\n        return _createVNode(\"div\", {\n          \"ref\": ref2,\n          \"class\": bem(side),\n          \"onClick\": getClickHandler(side, true)\n        }, [contentSlot()]);\n      }\n    };\n    useExpose({\n      open,\n      close\n    });\n    useClickAway(root, () => onClick(\"outside\"), {\n      eventName: \"touchstart\"\n    });\n    return () => {\n      var _a;\n      const wrapperStyle = {\n        transform: `translate3d(${state.offset}px, 0, 0)`,\n        transitionDuration: state.dragging ? \"0s\" : \".6s\"\n      };\n      return _createVNode(\"div\", {\n        \"ref\": root,\n        \"class\": bem(),\n        \"onClick\": getClickHandler(\"cell\"),\n        \"onTouchstart\": onTouchStart,\n        \"onTouchmove\": onTouchMove,\n        \"onTouchend\": onTouchEnd,\n        \"onTouchcancel\": onTouchEnd\n      }, [_createVNode(\"div\", {\n        \"class\": bem(\"wrapper\"),\n        \"style\": wrapperStyle\n      }, [renderSideContent(\"left\", leftRef), (_a = slots.default) == null ? void 0 : _a.call(slots), renderSideContent(\"right\", rightRef)])]);\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n","import { withInstall } from \"../utils\";\nimport _SwipeCell from \"./SwipeCell\";\nconst SwipeCell = withInstall(_SwipeCell);\nvar stdin_default = SwipeCell;\nexport {\n  SwipeCell,\n  stdin_default as default\n};\n","import { render } from \"./index.vue?vue&type=template&id=3362bd17\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=3362bd17&lang=less\"\n\nimport exportComponent from \"/Users/gannonsun/MyCodeLife/myGithub/whg-Appointment/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}